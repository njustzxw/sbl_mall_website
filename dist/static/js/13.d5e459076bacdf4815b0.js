webpackJsonp([13],{"90gz":function(t,a){},hCvH:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("qsHl"),s={name:"search",data:function(){return{totaldata:{},categoryList:[],brandList:[],currentbrand:"all",showprice:-1,orderBy:"price_desc",current:1,total:10,num:16,categoryId:"",yourlisjList:[],expandfag:1}},computed:{keyword:function(){return this.$store.state.goods.keyword},currentCatogoryId:function(){return this.$store.state.goods.currentCatogoryId}},watch:{},mounted:function(){this.$store.commit("setCatId",this.$route.params.catid),this._getCategory(),"all"==this.$route.params.catid?this._getProductListall():this._getProductList()},methods:{_getCategory:function(){var t=this;Object(i.i)().then(function(a){t.categoryList=a.data}),this._getyoulike()},_getProductListall:function(){var t=this;this.current=1;var a={categoryId:"",keyword:"",pageNum:this.current,pageSize:"16",orderBy:this.orderBy};Object(i.l)(a).then(function(a){0==a.status&&(t.brandList=a.data.brandList,t.totaldata=a.data.pageInfo,t.total=a.data.pageInfo.total)})},_getProductList:function(){var t=this,a={categoryId:this.currentCatogoryId,pageNum:this.current,pageSize:"16",orderBy:this.orderBy};Object(i.l)(a).then(function(a){0==a.status&&(t.brandList=a.data.brandList,t.totaldata=a.data.pageInfo,t.total=a.data.pageInfo.total)})},selectcategory:function(t){this.current=1,this.$store.commit("setCatId",t),this.$router.push({path:"/allProduct/"+t}),"all"==t?this._getProductListall():this._getProductList()},selectorderBy:function(t){this.current=1,this.orderBy=t,"all"==this.currentCatogoryId?this._getProductListall():this._getProductList()},goto:function(t){var a=this.$router.resolve({path:"/describe/"+t}).href;window.open(a,"_blank")},addToCart:function(t){this.$store.commit("addCart",t)},changepage:function(t){this.current=t,this._selectbrand(),this.toTop(500)},pagesizechange:function(t){this.pageSize=t,this._selectbrand(),this.toTop(500)},_getyoulike:function(){var t=this;Object(i.s)().then(function(a){t.yourlisjList=a.data.slice(0,6)})},toTop:function(t){var a=this;if(document.documentElement.scrollTop-=t,document.documentElement.scrollTop>0)var e=setTimeout(function(){return a.toTop(t)},16);else clearTimeout(e)},expend:function(){1==this.expandfag?(this.expandfag=2,$(".filter-list").animate({maxHeight:"450px"})):(this.expandfag=1,$(".filter-list").animate({maxHeight:"77px"}))},_selectbrand:function(t){var a=this;if(t&&(this.current=1,this.currentbrand=t),"all"==this.currentbrand)this._getProductList();else{var e={categoryId:this.$route.params.catid,brand:this.currentbrand,pageNum:this.current,pageSize:"16"};Object(i.j)(e).then(function(t){console.log(t),0==t.status&&(a.totaldata=t.data,a.total=t.data.total)})}}}},o={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("div",{staticClass:"breadcrumbs"}),t._v(" "),i("div",{staticClass:"filter-box pr"},[i("dl",{staticClass:"filter-list clearfix",staticStyle:{"max-height":"77px"}},[i("dt",[t._v("品牌：")]),t._v(" "),i("dd",{class:"all"==t.currentbrand?"active":"",on:{click:function(a){t._selectbrand("all")}}},[t._v("不限")]),t._v(" "),t._l(t.brandList,function(a,e){return i("dd",{key:e,staticClass:"pr"},[i("span",{staticClass:"bgborder pa"}),t._v(" "),i("span",{class:t.currentbrand==a?"active":"",on:{click:function(e){t._selectbrand(a)}}},[t._v(t._s(a))])])})],2),t._v(" "),t.brandList.length>17?i("div",{staticClass:"expand pa",on:{click:t.expend}},[i("Icon",{attrs:{type:1==t.expandfag?"chevron-down":"chevron-up"}}),t._v(" "),i("span",[t._v(t._s(1==t.expandfag?"展开":"收起"))])],1):t._e()]),t._v(" "),i("div",{staticClass:"order-list-box clearfix"}),t._v(" "),t.totaldata.list&&t.totaldata.list.length?i("div",{staticClass:"goods-list-box"},[i("div",{staticClass:"goods-list clearfix"},t._l(t.totaldata.list,function(a,e){return i("div",{key:e,staticClass:"goods-item",on:{click:function(e){t.goto(a.id)},mouseover:function(a){t.showprice=e},mouseout:function(a){t.showprice=-1}}},[i("div",{staticClass:"figure figure-img"},[i("img",{attrs:{src:a.mainImage,alt:a.name}})]),t._v(" "),i("h2",{staticClass:"title"},[t._v(t._s(a.name))]),t._v(" "),i("p",{staticClass:"price"},[t._v(t._s(a.price)+"元")]),t._v(" "),i("transition",{attrs:{name:"fade1"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showprice==e,expression:"showprice == index"}],staticClass:"clearfix"},[i("Button",{on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.goto(a.id)}}},[t._v("查看详情")]),t._v(" "),i("Button",{attrs:{type:"info"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.addToCart(a)}}},[t._v("加入购物车")])],1)])],1)})),t._v(" "),i("div",{staticClass:"fy"},[i("Page",{attrs:{total:t.total,current:t.current,"page-size":t.num},on:{"on-change":t.changepage,"on-page-size-change":t.pagesizechange}})],1)]):i("div",{staticClass:"goods-list-box bg-white",staticStyle:{"text-align":"center"}},[i("img",{staticStyle:{width:"100px","margin-top":"130px"},attrs:{src:e("UoPe"),alt:""}}),t._v(" "),i("p",{staticClass:"nonedata"},[t._v("暂无数据")])]),t._v(" "),i("div",{staticClass:"mt20"},[i("div",{staticClass:"liketitle"},[t._v("猜你喜欢")]),t._v(" "),i("ul",{staticClass:"yourlike clearfix"},t._l(t.yourlisjList,function(a,e){return i("li",{key:e,staticClass:"fl"},[i("img",{staticClass:"youfavarite",attrs:{src:a.image,alt:""},on:{click:function(e){t.goto(a.productId)}}}),t._v(" "),i("p",{staticClass:"name",on:{click:function(e){t.goto(a.productId)}}},[t._v(t._s(a.name))]),t._v(" "),i("p",{staticClass:"price",staticStyle:{color:"red"}},[t._v("￥"+t._s(a.price.toFixed(2)))]),t._v(" "),i("Button",{attrs:{type:"dashed"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.addToCart(a)}}},[t._v("加入购物车")])],1)}))])])},staticRenderFns:[]};var r=e("C7Lr")(s,o,!1,function(t){e("90gz")},null,null);a.default=r.exports}});
//# sourceMappingURL=13.d5e459076bacdf4815b0.js.map