webpackJsonp([21],{"8gkn":function(t,e){},NzWx:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("HzJ8"),s=a.n(i),o=a("FWz8"),n=a("qsHl"),r={name:"Myorder",props:["headtitle"],data:function(){return{moretext:"",orderList:[],modal2:!1,modal_loading:!1,loading1:!1,currentitem:{},showdownloadFag:!1,datetype:"year",year:"",month:"",startTime:"",endTime:"",data1:[],columns1:[{title:"订单号",key:"orderNo"},{title:"订单创建时间",key:"createTime"},{title:"产品名称",key:"productName"},{title:"快递方式",key:"expressType"},{title:"快递单号",key:"expressNub"},{title:"付款方式",key:"paymentTypeDesc"},{title:"单价",key:"currentUnitPrice"},{title:"数量",key:"quantity"},{title:"付款总额",key:"totalPrice"}]}},mounted:function(){this._getorderlist()},computed:{userInfo:function(){return JSON.parse(this.$store.state.user.userInfo)}},methods:{_getorderlist:function(){var t=this;Object(o.l)().then(function(e){t.orderList=e.data.list})},lookdetail:function(t){var e=this.$router.resolve({path:"/orderDetail/"+t}).href;window.open(e,"_blank")},pay:function(t){this.$router.push({path:"/payment/"+t})},gopay:function(t){this.$router.push({path:"/payment/"+t})},goto1:function(t){var e=this.$router.resolve({path:"/describe/"+t}).href;window.open(e,"_blank")},delconfirm:function(t){this.currentorder=t,this.modal2=!0},_delorder:function(){var t=this,e={orderNo:this.currentorder};this.modal_loading=!0,Object(o.e)(e).then(function(e){setTimeout(function(){t.modal_loading=!1,t.modal2=!1,0==e.status?(t.$Message.success("删除成功"),t._getorderlist()):t.$Message.error("删除失败")},1e3)})},confirm:function(t){var e=this,a={orderNo:t};Object(o.c)(a).then(function(t){0==t.status?(e.$Message.success("确认收货成功！"),e._getorderlist()):e.$Message.error("收货失败")})},redit:function(t){var e=this;this.currentitem=t,this.loading1=!0,this.$store.commit("reditorder",t.orderItemVoList),setTimeout(function(){e.loading1=!1,e.$router.push({path:"/cart"})},1e3)},refund:function(t){this.$store.commit("refund",t);var e=this.$router.resolve({path:"/refund/"+t.orderNo}).href;window.open(e,"_blank")},gocomment:function(t,e){this.$store.commit("evaluation",t);var a=this.$router.resolve({path:"/evaluation/"+t.orderNo}).href;window.open(a,"_blank")},_moreevaluate:function(t){var e=this;Object(n.q)({productId:t.productId}).then(function(t){var a="",i=!0,n=!1,r=void 0;try{for(var c,l=s()(t.data);!(i=(c=l.next()).done);i=!0){var d=c.value;if(d.userId==e.userInfo.id){a=d.commentId;break}}}catch(t){n=!0,r=t}finally{try{!i&&l.return&&l.return()}finally{if(n)throw r}}if(e.moretext)Object(o.n)({commentId:a,newContent:e.moretext}).then(function(t){var e='<div class="alertinfobox clearfix">\n\t\t\t\t\t\t\t<img src="../../static/images/'+("添加追评成功"==t.data?"success":"gantan")+'.png" class="fl">\n\t\t\t\t\t\t\t<span class="alertinfo fl" style="width:200px;">\n\t\t\t\t\t\t\t\t'+("添加追评成功"==t.data?"添加追评成功":t.msg)+" <br/>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>";ti_xing(e),setTimeout(function(){$("#ti_xing").modal("hide")},2e3)});else{ti_xing('<div class="alertinfobox clearfix">\n\t\t\t\t\t\t\t<img src="../../static/images/gantan.png" class="fl">\n\t\t\t\t\t\t\t<span class="alertinfo fl" style="width:200px;">\n\t\t\t\t\t\t\t\t请填写完整信息！ <br/>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>'),setTimeout(function(){$("#ti_xing").modal("hide")},2e3)}})},_download:function(){var t=this,e=this,a={};a="year"==this.datetype?{year:this.year}:"month"==this.datetype?{year:this.year,month:this.month}:{startTime:this.startTime,endTime:this.endTime},Object(o.f)(a).then(function(a){console.log(a.data);var i=[],o=!0,n=!1,r=void 0;try{for(var c,l=s()(a.data);!(o=(c=l.next()).done);o=!0){var d=c.value,p=!0,u=!1,v=void 0;try{for(var f,m=s()(d.orderItemVoList);!(p=(f=m.next()).done);p=!0){var h=f.value;h.createTime=d.createTime,h.payment=d.payment,h.paymentTypeDesc=d.paymentTypeDesc,h.expressNub=d.expressNub,h.expressType=d.expressType,i.push(h)}}catch(t){u=!0,v=t}finally{try{!p&&m.return&&m.return()}finally{if(u)throw v}}}}catch(t){n=!0,r=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw r}}t.data1=i,console.log(t.data1),setTimeout(function(t){e.exportData()},1e3)})},timechange1:function(t,e){this.year=t},timechange2:function(t,e){this.year=t.split("-")[0],this.month=t.split("-")[1]},timechange3:function(t,e){this.startTime=t[0],this.endTime=t[1]},exportData:function(){this.$refs.table.exportCsv({filename:"订单列表详情"});ti_xing('<div class="alertinfobox clearfix">\n                    <img src="../../static/images/success.png" class="fl">\n                    <span class="alertinfo fl" style="width:200px;">\n                        下载数据成功 <br/>\n                    </span>\n                </div>'),setTimeout(function(){$("#ti_xing").modal("hide")},2e3)}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("section",{staticClass:"headline"},[a("h2",[a("span",[t._v(t._s(t.headtitle))]),t._v(" "),a("div",{staticClass:"download pr"},[a("Icon",{directives:[{name:"show",rawName:"v-show",value:t.orderList.length,expression:"orderList.length"}],attrs:{type:"ios-cloud-download-outline",title:"下载订下载订单",size:"25"},on:{click:function(e){t.showdownloadFag=!0}}})],1)])]),t._v(" "),t.orderList.length?a("section",{staticClass:"content"},[a("Table",{ref:"table",staticStyle:{display:"none"},attrs:{columns:t.columns1,data:t.data1}}),t._v(" "),t._l(t.orderList,function(e,i){return a("div",{key:i,staticClass:"box-goods-section fn-clear pr"},[a("div",{staticClass:"gray-top-info"},[a("span",{staticClass:"date"},[t._v(t._s(e.createTime))]),t._v(" "),a("span",{staticClass:"order-id"},[t._v("订单号： "),a("i",{staticClass:"ddh",on:{click:function(a){t.lookdetail(e.orderNo)}}},[t._v(t._s(e.orderNo))]),a("b",{staticClass:"zffs"},[t._v("("+t._s(e.paymentTypeDesc)+")")])]),t._v(" "),a("span",{staticClass:"goods-num"},[t._v("数量")]),t._v(" "),a("span",{staticClass:"price"},[t._v("单价")]),t._v(" "),a("span",{staticClass:"operate"},[t._v("商品操作")]),t._v(" "),a("span",{staticClass:"total"},[t._v("应付总额")]),t._v(" "),a("span",{staticClass:"prostatus"},[t._v("订单状态")]),t._v(" "),a("span",{staticClass:"view-detail",on:{click:function(a){t.lookdetail(e.orderNo)}}},[t._v("查看详情")])]),t._v(" "),a("div",{staticClass:"order-cart-info pr clearfix"},[a("div",{staticClass:"goods-list clearfix fl"},t._l(e.orderItemVoList,function(i,s){return a("div",{key:s,staticClass:"goods-list-item clearfix fl",staticStyle:{cursor:"pointer"},on:{click:function(e){t.goto1(i.productId)}}},[a("div",{staticClass:"items-thumb"},[a("img",{attrs:{src:i.productImage,alt:""}})]),t._v(" "),a("div",{staticClass:"items-title"},[a("div",{staticClass:"name vh-center"},[a("span",[t._v(t._s(i.productName)+" "+t._s(i.modelName?"("+i.modelName+")":""))])]),t._v(" "),a("div",{staticClass:"desc"})]),t._v(" "),a("div",{staticClass:"goods-num"},[t._v(t._s(i.quantity))]),t._v(" "),a("div",{staticClass:"price"},[t._v("¥"+t._s(i.currentUnitPrice))]),t._v(" "),a("div",{staticClass:"operate"},[4==e.status?a("div",{on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.refund(i)}}},[t._v("申请售后")]):t._e(),t._v(" "),2==e.status||3==e.status||5==e.status||7==e.status?a("div",{on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.refund(i)}}},[t._v("退款/退货")]):t._e()])])})),t._v(" "),a("div",{staticClass:" fl payright",style:{height:100*e.orderItemVoList.length+"px"}},[a("div",{staticClass:"total"},[t._v("¥"+t._s(e.payment))])]),t._v(" "),a("div",{staticClass:" fl payright",style:{height:100*e.orderItemVoList.length+"px"}},[a("div",{staticClass:"orderstatus"},[a("div",[t._v(t._s(e.statusDesc))]),t._v(" "),a("div",{on:{click:function(a){t.lookdetail(e.orderNo)}}},[t._v("订单详情")])])]),t._v(" "),a("div",{staticClass:" fl payright",staticStyle:{border:"none"}},[-4==e.status?a("div",{staticClass:"orderop"},[a("Button",{staticClass:"opationbtn",attrs:{type:"info"},on:{click:function(a){t.gopay(e.orderNo)}}},[t._v("去支付")]),t._v(" "),a("div",{on:{click:function(a){t.delconfirm(e.orderNo)}}},[t._v("删除")])],1):t._e(),t._v(" "),-2==e.status?a("div",{staticClass:"orderop"},[a("div",{on:{click:function(a){t.delconfirm(e.orderNo)}}},[t._v("删除")])]):t._e(),t._v(" "),1==e.status?a("div",{staticClass:"orderop"},[a("div",{on:{click:function(a){t.confirm(e.orderNo)}}},[1==e.status?a("Button",{staticClass:"opationbtn",attrs:{type:"warning",loading:t.loading1&&t.currentitem.orderNo==e.orderNo},on:{click:function(a){t.redit(e)}}},[t._v("重新编辑")]):t._e()],1)]):t._e(),t._v(" "),3==e.status?a("div",{staticClass:"orderop"},[a("div",{on:{click:function(a){t.confirm(e.orderNo)}}},[t._v("确认收货")])]):t._e(),t._v(" "),4==e.status?a("div",{staticClass:"orderop"},t._l(e.orderItemVoList,function(e,i){return a("div",{key:i,staticClass:"pj",staticStyle:{height:"100px",width:"108px"}},[a("Button",{staticClass:"opationbtn",on:{click:function(a){t.gocomment(e)}}},[t._v("评价")])],1)})):t._e(),t._v(" "),6==e.status?a("div",{staticClass:"orderop"},[a("Button",{staticClass:"opationbtn",attrs:{type:"info"},on:{click:function(a){t.gopay(e.orderNo)}}},[t._v("去支付")])],1):t._e(),t._v(" "),9==e.status?a("div",{staticClass:"orderop"},t._l(e.orderItemVoList,function(e,i){return a("div",{key:i,staticClass:"pj",staticStyle:{height:"100px",width:"108px"}},[a("Poptip",{attrs:{title:"追加评价",content:"content",placement:"bottom-end",width:"300"}},[a("Button",{staticClass:"opationbtn"},[t._v("追加评价")]),t._v(" "),a("div",{staticClass:"api",attrs:{slot:"content"},slot:"content"},[a("div",[a("Input",{staticStyle:{width:"250px"},attrs:{type:"textarea",rows:4,placeholder:"请输入评价"},model:{value:t.moretext,callback:function(e){t.moretext=e},expression:"moretext"}})],1),t._v(" "),a("Button",{staticStyle:{margin:"10px 10px 0  0",float:"right"},attrs:{type:"primary"},on:{click:function(a){t._moreevaluate(e)}}},[t._v("提交")])],1)],1)],1)})):t._e()])])])})],2):a("section",{staticClass:"content",staticStyle:{width:"100%"}},[t._m(0)]),t._v(" "),a("Modal",{attrs:{width:"360"},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"information-circled"}}),t._v(" "),a("span",[t._v("确认删除此订单？")])],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("p",[t._v("此订单删除后将不可恢复")]),t._v(" "),a("p",[t._v("是否继续删除?")])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error",size:"large",long:"",loading:t.modal_loading},on:{click:t._delorder}},[t._v("删除")])],1)]),t._v(" "),a("Modal",{attrs:{title:"订单下载",width:"360"},on:{"on-ok":t._download},model:{value:t.showdownloadFag,callback:function(e){t.showdownloadFag=e},expression:"showdownloadFag"}},[a("RadioGroup",{model:{value:t.datetype,callback:function(e){t.datetype=e},expression:"datetype"}},[a("Radio",{attrs:{label:"year"}},[t._v("按年选择")]),t._v(" "),a("Radio",{attrs:{label:"month"}},[t._v("按月选择")]),t._v(" "),a("Radio",{attrs:{label:"sjd"}},[t._v("按时间段")])],1),t._v(" "),"year"==t.datetype?a("div",{staticStyle:{margin:"20px 0 0 10px"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"year",placeholder:"选择年"},on:{"on-change":t.timechange1}})],1):t._e(),t._v(" "),"month"==t.datetype?a("div",{staticStyle:{margin:"20px 0 0 10px"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"month",placeholder:"选择月"},on:{"on-change":t.timechange2}})],1):t._e(),t._v(" "),"sjd"==t.datetype?a("div",{staticStyle:{margin:"20px 0 0 10px"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange","split-panels":"",placeholder:"选择日期"},on:{"on-change":t.timechange3}})],1):t._e()],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"text-align":"center"}},[e("img",{staticStyle:{width:"100px","margin-top":"130px"},attrs:{src:a("UoPe"),alt:""}}),this._v(" "),e("p",{staticClass:"nonedata"},[this._v("暂无订单 赶紧去购物吧～")])])}]};var l=a("C7Lr")(r,c,!1,function(t){a("8gkn")},"data-v-9e69fcf0",null);e.default=l.exports},UoPe:function(t,e,a){t.exports=a.p+"static/img/cart.f9f1db3.png"}});
//# sourceMappingURL=21.21805c841065496f431d.js.map